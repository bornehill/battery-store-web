(this["webpackJsonpbattery-web"]=this["webpackJsonpbattery-web"]||[]).push([[0],{110:function(e,t,a){},111:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),l=a(51),c=a.n(l),o=a(9),s=a(10),i=a(12),u=a(11),m=a(18),d=a(5),p=a(4),b=a(3),h=a(25),f=(a(64),h.a.initializeApp({apiKey:"AIzaSyDOX9dL1b-RhOtksh_6EAsapjVXo3UR8ZY",authDomain:"sanfelipe-battery-store.firebaseapp.com",databaseURL:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_API_URL:"https://battery-store-api.vercel.app/api",REACT_APP_FIREBASE_APP_ID:"1:1018717675705:web:8846568eeef3a73cb57b68",REACT_APP_FIREBASE_DOMAIN:"sanfelipe-battery-store.firebaseapp.com",REACT_APP_FIREBASE_KEY:"AIzaSyDOX9dL1b-RhOtksh_6EAsapjVXo3UR8ZY",REACT_APP_FIREBASE_PROJECT_ID:"sanfelipe-battery-store",REACT_APP_FIREBASE_SENDER_ID:"1018717675705",REACT_APP_FIREBASE_STORAGE_BUCKET:"sanfelipe-battery-store.appspot.com"}).REACT_APP_FIREBASE_DATABASE,projectId:"sanfelipe-battery-store",storageBucket:"sanfelipe-battery-store.appspot.com",messagingSenderId:"1018717675705",appId:"1:1018717675705:web:8846568eeef3a73cb57b68",measurementId:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_API_URL:"https://battery-store-api.vercel.app/api",REACT_APP_FIREBASE_APP_ID:"1:1018717675705:web:8846568eeef3a73cb57b68",REACT_APP_FIREBASE_DOMAIN:"sanfelipe-battery-store.firebaseapp.com",REACT_APP_FIREBASE_KEY:"AIzaSyDOX9dL1b-RhOtksh_6EAsapjVXo3UR8ZY",REACT_APP_FIREBASE_PROJECT_ID:"sanfelipe-battery-store",REACT_APP_FIREBASE_SENDER_ID:"1018717675705",REACT_APP_FIREBASE_STORAGE_BUCKET:"sanfelipe-battery-store.appspot.com"}).REACT_APP_FIREBASE_MEASUREMENT_ID})),E=a(52),g=a.n(E),v=Object(s.a)((function e(t){Object(o.a)(this,e),this.instance=g.a.create({baseURL:"https://battery-store-api.vercel.app/api"+t,headers:{"Content-Type":"application/json"}})})),S=new(function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.call(this,"/auth")}return Object(s.a)(a,[{key:"userMenu",value:function(e){if(e){var t={headers:{"x-auth-token":"Bearer ".concat(e)}};return this.instance.get("/menu",t)}return Promise.resolve({data:[]})}},{key:"getProfile",value:function(e,t){var a;if(t=null!==(a=localStorage.getItem("token"))&&void 0!==a?a:t){var n={headers:{"x-auth-token":"Bearer ".concat(t)}};return this.instance.get("/profile/".concat(e),n)}return Promise.resolve({data:null})}},{key:"updateProfile",value:function(e,t){var a=localStorage.getItem("token");if(a){var n={headers:{"x-auth-token":"Bearer ".concat(a)}};return this.instance.put("/profile/".concat(e,"/update"),t,n)}return Promise.resolve({data:null})}}]),a}(v)),O=a(0),x=a(56),j="loading",y="success",w="error",N=Object(n.createContext)(),A=function(e){var t=e.children,a=Object(n.useState)(null),l=Object(b.a)(a,2),c=l[0],o=l[1],s=Object(n.useState)(null),i=Object(b.a)(s,2),u=i[0],m=i[1],d=Object(n.useState)(null),p=Object(b.a)(d,2),h=p[0],E=p[1],g=Object(n.useState)(j),v=Object(b.a)(g,2),S=v[0];v[1];Object(n.useEffect)((function(){f.auth().onAuthStateChanged((function(e){O(e)}))}),[c,o]);var O=function(e){o(e),e&&f.auth().currentUser.getIdToken(!0).then((function(e){localStorage.setItem("token",e),m(e)}))};return r.a.createElement(N.Provider,{value:{currentUser:c,profile:h,statusProfile:S,authToken:u,setProfile:E,setAuthToken:m}},t)},P=a(29),C=a(26),k=a(53),_=a(27);var R=function(e){var t=e.show,a=e.title,n=e.msg,l=e.okBtn,c=e.cancelBtn,o=e.okFn,s=e.cancelFn;return r.a.createElement(r.a.Fragment,null,t&&r.a.createElement("div",{className:"fixed z-10 inset-0 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},r.a.createElement("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},r.a.createElement("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true"}),r.a.createElement("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"\u200b"),r.a.createElement("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"},r.a.createElement("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},r.a.createElement("div",{className:"sm:flex sm:items-start"},r.a.createElement("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10"},r.a.createElement("svg",{className:"h-6 w-6 text-red-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true"},r.a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"}))),r.a.createElement("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left"},r.a.createElement("h3",{className:"text-lg leading-6 font-medium text-gray-900",id:"modal-title"},a),r.a.createElement("div",{className:"mt-2"},r.a.createElement("p",{className:"text-sm text-gray-500"},n))))),r.a.createElement("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},l&&r.a.createElement("button",{type:"button",className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-900 text-base font-medium text-white hover:bg-blue-900 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm",onClick:o},l),c&&r.a.createElement("button",{type:"button",className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",onClick:s},c))))))},I=function(e){var t=e.show,a=Object(n.useContext)(N).authToken,l=Object(d.f)(),c=Object(n.useState)(!1),o=Object(b.a)(c,2),s=o[0],i=o[1],u=Object(n.useState)([]),p=Object(b.a)(u,2),h=p[0],E=p[1];return Object(n.useEffect)((function(){S.userMenu(a).then((function(e){var t,a=e.data;(null===(t=a.data)||void 0===t?void 0:t.length)&&E(a.data)})).catch()}),[a]),r.a.createElement(r.a.Fragment,null,r.a.createElement(R,{show:s,title:"Cerrar sesion",msg:"\xbfQuieres cerrar sesion?",okBtn:"Aceptar",cancelBtn:"Cancelar",okFn:function(){localStorage.removeItem("token"),f.auth().signOut(),l.push("/")},cancelFn:function(){i(!1)}}),r.a.createElement("div",{className:"side-menu ".concat(t?"open":"hide")},r.a.createElement("div",null,r.a.createElement(O.b.Provider,{value:{className:"m-1"}},r.a.createElement("p",null,"Menu"),r.a.createElement("ul",null,null===h||void 0===h?void 0:h.map((function(e){return r.a.createElement("li",{className:"items-center cursor-pointer",key:"li-"+e.id},r.a.createElement(m.b,{className:"flex",to:e.path,key:e.id},function(e){switch(e){case"AiFillEdit":return r.a.createElement(P.a,null);case"AiFillShop":return r.a.createElement(P.c,null);case"AiFillSetting":return r.a.createElement(P.b,null);case"FaCashRegister":return r.a.createElement(C.a,null);case"FaStore":return r.a.createElement(C.c,null);case"FaClipboardList":return r.a.createElement(C.b,null);case"SiBrandfolder":return r.a.createElement(k.a,null);case"MdLocationOn":return r.a.createElement(_.b,null);default:return r.a.createElement(C.d,null)}}(e.icon),e.label))})),r.a.createElement("li",{className:"flex items-center cursor-pointer",onClick:function(){i(!0)}},r.a.createElement(x.a,null),"Cerrar sesion"))))))},F={show:!1,title:"Resetear contrase\xf1a",msg:"Enviaremos un correo electronico a tu cuenta",okBtn:"Aceptar",cancelBtn:"Cancelar",okFn:null,cancelFn:null},L={show:!1,title:"Agregar Producto",msg:"El producto sera agregado. \xbfEstas segur@?",okBtn:"Aceptar",cancelBtn:"Cancelar",okFn:null,cancelFn:null},B={show:!1,title:"Email validation",msg:"Email was sent to your register email",okBtn:"Accept",cancelBtn:null,okFn:null,cancelFn:null},T=function(e){var t=e.variant;return r.a.createElement("div",{className:"loading-bar "+t})},D=a(57),U=function(){var e=Object(n.useContext)(N).currentUser,t=Object(n.useState)(!1),a=Object(b.a)(t,2),l=a[0],c=a[1],o=Object(n.useState)(Object(p.a)({},B)),s=Object(b.a)(o,2),i=s[0],u=(s[1],Object(n.useState)(!1)),d=Object(b.a)(u,2),h=d[0],f=(d[1],Object(n.useState)(null)),E=Object(b.a)(f,2),g=E[0];E[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("header",null,r.a.createElement(R,i),e&&r.a.createElement("div",null,r.a.createElement("div",{className:"p-4 border-b-2 border-yellow-600 md:flex md:items-center md:justify-between"},r.a.createElement("div",{className:"flex items-center"},r.a.createElement(O.b.Provider,{value:{className:"m-3 text-onyx-700"}},r.a.createElement(D.a,{onClick:function(){c(!l)}})),r.a.createElement(m.b,{className:"font-emphasis",to:"/"},r.a.createElement("span",{className:"text-xl text-yellow-600"},"SanFelipe"),r.a.createElement("span",{className:"font-light text-2xl text-onyx-700"},"Acumuladores")))),r.a.createElement(I,{show:l})),!e&&r.a.createElement("div",{className:"flex items-center justify-between p-4 border-b-2 border-yellow-600"},r.a.createElement(m.b,{className:"font-emphasis",to:"/"},r.a.createElement("span",{className:"text-xl text-yellow-600"},"SanFelipe"),r.a.createElement("span",{className:"font-light text-2xl text-blue-900"},"Acumuladores")))),h&&r.a.createElement(T,null),g&&r.a.createElement("p",{className:"mt-2 text-sm p-2 text-white bg-red-700"},g))},M=function(){return r.a.createElement("footer",{className:"bg-blue-900"},r.a.createElement("div",{className:"bg-onyx-900 py-3 text-white text-center"},"SanFelipeAcumuladores\u2122 Copyright 2022"))},G=a(7),z=a.n(G),V=a(58),K=a(22),W=["name","label","error"],q=function(e){var t=e.name,a=e.label,n=e.error,l=Object(K.a)(e,W),c=n?" has-error":"";return r.a.createElement("div",{className:"input-control"+c},r.a.createElement("label",{htmlFor:t},a),r.a.createElement("input",Object.assign({name:t,id:t},l)),n&&r.a.createElement("p",{className:"text-sm text-red-700"},n))},X=["name","label","value","options","error"],Y=function(e){var t=e.name,a=e.label,n=e.value,l=e.options,c=e.error,o=Object(K.a)(e,X),s=c?" has-error":"";return r.a.createElement("div",{className:"input-control"+s},r.a.createElement("label",{htmlFor:t},a),r.a.createElement("select",Object.assign({name:t,value:n},o),l.map((function(e){return r.a.createElement("option",{key:e.value,value:e.value},e.text)}))),c&&r.a.createElement("p",{className:"text-sm text-red-700"},c))},Z=["name","label","error","disabled","handleValues","imgSize"],H=function(e){var t=e.name,a=e.label,l=e.error,c=e.disabled,o=e.handleValues,s=e.imgSize,i=Object(K.a)(e,Z),u=Object(n.useState)(""),m=Object(b.a)(u,2),d=(m[0],m[1]),p=Object(n.useState)(""),h=Object(b.a)(p,2),f=h[0],E=h[1],g=Object(n.useState)(""),v=Object(b.a)(g,2),S=(v[0],v[1]),O=Object(n.useState)(""),x=Object(b.a)(O,2),j=x[0],y=x[1],w=Object(n.useState)(s),N=Object(b.a)(w,2),A=N[0],P=N[1],C=function(e){var a=e.target.result,n=btoa(a);S(n),o(t,n,e.total)},k=l?" has-error":"";return r.a.createElement("div",{className:"input-control"+k},r.a.createElement(q,Object.assign({type:"file",name:t,label:a,id:t,accept:".jpef, .png, .jpg",onChange:function(e){e.preventDefault();var t=new FileReader,a=e.target.files[0];void 0!==t&&void 0!==a&&(t.onloadend=function(){d(a),P(a.size),y(a.name),E(t.result),function(e){if(e){var t=new FileReader;t.onload=C,t.readAsBinaryString(e)}}(a)},t.readAsDataURL(a))},src:f,defaultValue:j,error:l,disabled:c},i)),!!A&&r.a.createElement("div",null,r.a.createElement("section",null,r.a.createElement("div",null,r.a.createElement("label",null,"Size: "),r.a.createElement("span",null,(A/1024).toFixed(2)," Kb"))),r.a.createElement("button",{className:"btn btn-link",type:"button",onClick:function(){d(""),E(""),S(""),y(""),P(""),o(t,"",0)}},"Remove")))},J=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={data:{},errors:{},isLoading:!1},e.validate=function(){var t=z.a.object(e.formSchema).validate(e.state.data,{abortEarly:!1}).error;if(!t)return null;var a,n={},r=Object(V.a)(t.details);try{for(r.s();!(a=r.n()).done;){var l=a.value;n[l.path[0]]=l.message}}catch(c){r.e(c)}finally{r.f()}return n},e.validateProperty=function(t){var a=t.name,n=t.value,r=e.formSchema[a].validate(n).error;return r?r.message:""},e.handleSubmit=function(t){t.preventDefault();var a=Object(p.a)({},e.state.errors);a.logo||((a=e.validate())?e.setState({errors:a}):e.doSubmit())},e.handleChange=function(t){var a=t.currentTarget,n=Object(p.a)({},e.state.errors),r=Object(p.a)({},e.state.data);n[a.name]=e.validateProperty(a).replace("value",a.name),r[a.name]="checkbox"===a.type?a.checked:a.value,e.setState({data:r,errors:n})},e.handleImage=function(t,a,n){var r=Object(p.a)({},e.state.errors),l=Object(p.a)({},e.state.data);if(!a&&!n)return r[t]="",l[t]="",l["".concat(t,"Size")]=0,void e.setState({data:l,errors:r});r[t]=n>1048576?"Image size must be less that 1M":"",r[t]||(l[t]=a,l["".concat(t,"Size")]=n),e.setState({data:l,errors:r})},e}return Object(s.a)(a,[{key:"renderSubmit",value:function(e){return r.a.createElement("button",{disabled:this.state.isLoading,className:"btn btn-primary",type:"submit"},e)}},{key:"renderInput",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text",n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],l=this.state,c=l.data,o=l.errors;return r.a.createElement(q,{type:a,label:t,name:e,defaultValue:c[e],error:o[e],disabled:n,onChange:this.handleChange})}},{key:"renderDropDown",value:function(e,t,a,n){var l=this.state,c=l.data,o=l.errors;return r.a.createElement(Y,{name:e,label:t,value:c[e],options:a,error:o[e],onChange:this.handleChange,disabled:n})}},{key:"renderCheckbox",value:function(e,t){var a=this.state,n=a.data,l=a.errors;return r.a.createElement(q,{type:"checkbox",label:t,name:e,defaultChecked:n[e],error:l[e],onChange:this.handleChange})}},{key:"renderUploadImage",value:function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],l=this.state.errors;return r.a.createElement(H,{label:t,name:e,error:l[e],disabled:n,handleValues:this.handleImage,imgSize:a})}}]),a}(n.Component),$=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={data:{email:"",password:"",confirmPass:""},errors:{email:"",password:"",confirmPass:""},isLoading:!1},e.formSchema={email:z.a.string().email({tlds:{allow:!1}}).message("Enter a valid e-mail"),password:z.a.string().pattern(new RegExp("^[a-zA-Z0-9]{6,30}$")).message("Password must be minimum 6 characters length"),confirmPass:z.a.string().pattern(new RegExp("^[a-zA-Z0-9]{6,30}$")).message("Confirm password must be minimum 6 characters length")},e.doSubmit=function(){e.invalidConfirmPass()||(e.setState({isLoading:!0}),e.props.onLoading(!0),f.auth().createUserWithEmailAndPassword(e.state.data.email,e.state.data.password).finally((function(){e.setState({isLoading:!1}),e.props.onLoading(!1)})).then(e.props.onSuccess).catch(e.props.onError))},e}return Object(s.a)(a,[{key:"invalidConfirmPass",value:function(){var e=this.state.data;if(e.password!==e.confirmPass){var t=Object(p.a)({},this.state.errors);return t.confirmPass="Confirm Passord error",this.setState({errors:t}),!0}return!1}},{key:"render",value:function(){return r.a.createElement("form",{onSubmit:this.handleSubmit,noValidate:!0},this.renderInput("email","E-mail","email"),this.renderInput("password","Password","password"),this.renderInput("confirmPass","Confirm Password","password"),r.a.createElement("div",{className:"flex items-center justify-between mt-8"},this.renderSubmit("Sign up")))}}]),a}(J),Q=function(e){var t=Object(n.useState)(!1),a=Object(b.a)(t,2),l=a[0],c=a[1],o=Object(n.useState)(!1),s=Object(b.a)(o,2),i=s[0],u=s[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(U,null),r.a.createElement("main",null,r.a.createElement("div",{className:"w-full h-screen card card-white md:max-w-md md:rounded-sm md:mx-auto md:h-auto relative"},l&&r.a.createElement(T,null),r.a.createElement("div",{className:"p-10"},r.a.createElement("h1",{className:"text-center text-2xl font-emphasis"},"Sign up"),i&&r.a.createElement("p",{className:"mt-2 text-sm p-2 text-white bg-red-700"},"Invalid signup"),r.a.createElement($,{onSuccess:function(){e.history.push("/home")},onError:function(e){u(!0)},onLoading:function(e){c(e),l&&u(!1)}})))),r.a.createElement(M,null))},ee=a(21),te=function(e,t){switch(t.type){case"BRAND_SUCCESS":return Object(p.a)(Object(p.a)({},e),{},{brands:t.brands,status:y});case"LOCATION_SUCCESS":return Object(p.a)(Object(p.a)({},e),{},{locations:t.locations,status:y});case"GET_FAILURE":return Object(p.a)(Object(p.a)({},e),{},{status:w,error:t.error});case"PRODUCTS_LOADED":return Object(p.a)(Object(p.a)({},e),{},{products:t.products,status:y});case"PROFILE_LOADED":return Object(p.a)(Object(p.a)({},e),{},{profile:t.profile,status:y});default:return e}},ae=new(function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.call(this,"/store")}return Object(s.a)(a,[{key:"getBrands",value:function(){var e=localStorage.getItem("token");if(e){var t={headers:{"x-auth-token":"Bearer ".concat(e)}};return this.instance.get("/brands",t)}return Promise.resolve({data:null})}},{key:"addBrand",value:function(e){var t=localStorage.getItem("token"),a={headers:{"x-auth-token":"Bearer ".concat(t)},transformResponse:[function(e){return e.data}]};return this.instance.post("/brands",e,a)}},{key:"getLocations",value:function(){var e=localStorage.getItem("token");if(e){var t={headers:{"x-auth-token":"Bearer ".concat(e)}};return this.instance.get("/",t)}return Promise.resolve({data:null})}},{key:"addLocation",value:function(e){var t=localStorage.getItem("token"),a={headers:{"x-auth-token":"Bearer ".concat(t)},transformResponse:[function(e){return e.data}]};return this.instance.post("/locations",e,a)}},{key:"getProducts",value:function(e){var t=localStorage.getItem("token");if(t){var a={headers:{"x-auth-token":"Bearer ".concat(t)}};return this.instance.get("/products?".concat(e),a)}return Promise.resolve({data:null})}},{key:"addProduct",value:function(e){var t=localStorage.getItem("token"),a={headers:{"x-auth-token":"Bearer ".concat(t)},transformResponse:[function(e){return e.data}]};return this.instance.post("/products",e,a)}},{key:"updateProduct",value:function(e){var t=localStorage.getItem("token"),a={headers:{"x-auth-token":"Bearer ".concat(t)},transformResponse:[function(e){return e.data}]};return this.instance.put("/products",e,a)}}]),a}(v)),ne=a(28),re=function(){var e={name:""},t=Object(n.useState)(!0),a=Object(b.a)(t,2),l=a[0],c=a[1],o=Object(n.useState)(null),s=Object(b.a)(o,2),i=s[0],u=s[1],m=Object(n.useState)(null),d=Object(b.a)(m,2),h=d[0],f=d[1],E=Object(n.useState)(e),g=Object(b.a)(E,2),v=g[0],S=g[1],O=Object(n.useReducer)(te,{brands:[]}),x=Object(b.a)(O,2),j=x[0].brands,y=x[1];return Object(n.useEffect)((function(){(null===j||void 0===j?void 0:j.length)||ae.getBrands().then((function(e){var t=e.data;y({brands:t.data,type:"BRAND_SUCCESS"})})).finally((function(){return c(!1)})).catch((function(e){console.log("error: ",e),y({type:"GET_FAILURE",error:e})}))}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(U,null),l&&r.a.createElement(T,null),i&&r.a.createElement("p",{className:"mt-2 text-sm p-2 text-white bg-red-700"},i),h&&r.a.createElement("p",{className:"mt-2 flex justify-between text-sm p-2 text-white bg-teal-700"},r.a.createElement("span",null,h),r.a.createElement(ne.a,{className:"cursor-pointer",onClick:function(){return f(null)},title:"Cerrar"})),r.a.createElement("main",{className:"max-w-screen-xl h-screen mx-auto flex justify-center px-5"},r.a.createElement("div",null,r.a.createElement("h1",{className:"text-3xl"},"Administrador de Marcas"),r.a.createElement("div",{className:"mb-4 md:flex md:items-end"},r.a.createElement(q,{label:"Nombre",name:"name",value:v.name,onChange:function(e){var t=e.currentTarget;f(null);var a=Object(p.a)({},v);a[t.name]=t.value,S(a)}}),r.a.createElement("button",{id:"addBtn",name:"addBtn",className:"btn btn-primary ml-2 h-10 mb-2",type:"button",onClick:function(){u(null),j.find((function(e){return e.name===v.name}))?u("La marca ya existe!"):(c(!0),ae.addBrand({name:v.name}).then((function(){y({brands:[].concat(Object(ee.a)(j),[v]),type:"BRAND_SUCCESS"}),f("Marca agregada!")})).finally((function(){c(!1),S(e)})).catch((function(e){return u(e)})))}},"Agregar")),r.a.createElement("table",{className:"md:mx-auto w-11/12 mb-5"},r.a.createElement("thead",null,r.a.createElement("tr",{className:"bg-blue-900 text-white font-light "},r.a.createElement("th",{className:"px-4 py-2"},"Marcas"))),r.a.createElement("tbody",null,0===(null===j||void 0===j?void 0:j.length)?r.a.createElement("tr",null,r.a.createElement("td",{className:"border-t-2 border-yellow-600"},l?"Cargando...":"No hay marcas registradas!")):j.map((function(e){return r.a.createElement("tr",{key:e._id},r.a.createElement("td",{className:"border-t-2 border-yellow-600"},e.name))})))))),r.a.createElement(M,null))},le=function(){var e={name:"",address:""},t=Object(n.useState)(!0),a=Object(b.a)(t,2),l=a[0],c=a[1],o=Object(n.useState)(null),s=Object(b.a)(o,2),i=s[0],u=s[1],m=Object(n.useState)(null),d=Object(b.a)(m,2),h=d[0],f=d[1],E=Object(n.useState)(e),g=Object(b.a)(E,2),v=g[0],S=g[1],O=Object(n.useReducer)(te,{locations:[]}),x=Object(b.a)(O,2),j=x[0].locations,y=x[1];function w(e){var t=e.currentTarget;f(null);var a=Object(p.a)({},v);a[t.name]=t.value,S(a)}return Object(n.useEffect)((function(){(null===j||void 0===j?void 0:j.length)||ae.getLocations().then((function(e){var t=e.data;y({locations:t.data,type:"LOCATION_SUCCESS"})})).finally((function(){return c(!1)})).catch((function(e){console.log("error: ",e),y({type:"GET_FAILURE",error:e})}))}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(U,null),l&&r.a.createElement(T,null),i&&r.a.createElement("p",{className:"mt-2 text-sm p-2 text-white bg-red-700"},i),h&&r.a.createElement("p",{className:"mt-2 flex justify-between text-sm p-2 text-white bg-teal-700"},r.a.createElement("span",null,h),r.a.createElement(ne.a,{className:"cursor-pointer",onClick:function(){return f(null)},title:"Cerrar"})),r.a.createElement("main",{className:"max-w-screen-xl h-screen mx-auto flex justify-center px-5"},r.a.createElement("div",null,r.a.createElement("h1",{className:"text-3xl"},"Administrador de Ubicaciones"),r.a.createElement("div",{className:"mb-4 md:flex md:items-end"},r.a.createElement(q,{label:"Nombre",name:"name",value:v.name,onChange:w}),r.a.createElement(q,{label:"Direccion",name:"address",value:v.address,onChange:w}),r.a.createElement("button",{id:"addBtn",name:"addBtn",className:"btn btn-primary ml-2 h-10 mb-2",type:"button",onClick:function(){u(null),j.find((function(e){return e.name===v.name}))?u("La ubicacion ya existe!"):(c(!0),ae.addLocation(v).then((function(){y({locations:[].concat(Object(ee.a)(j),[v]),type:"LOCATION_SUCCESS"}),f("Ubicacion agregada!")})).finally((function(){c(!1),S(e)})).catch((function(e){return u(e)})))}},"Agregar")),r.a.createElement("table",{className:"md:mx-auto w-11/12 mb-5"},r.a.createElement("thead",null,r.a.createElement("tr",{className:"bg-blue-900 text-white font-light "},r.a.createElement("th",{className:"px-4 py-2"},"Ubicacion"),r.a.createElement("th",{className:"px-4 py-2"},"Direccion"))),r.a.createElement("tbody",null,0===(null===j||void 0===j?void 0:j.length)?r.a.createElement("tr",null,r.a.createElement("td",{colSpan:2,className:"border-t-2 border-yellow-600"},l?"Cargando...":"No hay ubicaciones registradas!")):j.map((function(e){return r.a.createElement("tr",{key:e._id},r.a.createElement("td",{className:"border-t-2 border-yellow-600"},e.name),r.a.createElement("td",{className:"border-t-2 border-yellow-600"},e.address))})))))),r.a.createElement(M,null))},ce={Group1:"Grupo 1",Group2:"Grupo 2",Group3:"Grupo 3",Group4:"Grupo 4",Group5:"Grupo 5",Group6:"Grupo 6",Group7:"Grupo 7",Group8:"Grupo 8"};function oe(e,t,a){return e.map((function(e){return{value:e[t],text:e[a]}}))}var se=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).emptyErrors={brand:"",description:"",group:"",amp:"",price:""},e.state={data:e.props.productSelected,errors:e.emptyErrors,isLoading:!1,isShowModal:!1},e.formSchema={brand:z.a.string(),description:z.a.string().min(3).message("Descripcion requerida").required(),group:z.a.string(),amp:z.a.any(),price:z.a.number().min(100).message("Precio requerido").required(),id:z.a.any(),_id:z.a.any(),__v:z.a.any()},e.modalSetting=Object(p.a)({},L),e.closeModal=function(){e.modalSetting.show=!1,e.setState({isShowModal:!1})},e.save=function(){e.setState({isLoading:!0}),e.props.onLoading(!0),window.scrollTo(0,0),e.state.data.id?e.updateProduct():e.addProduct()},e.updateProduct=function(){ae.updateProduct(e.state.data).then((function(){e.setState({isLoading:!1}),e.props.onSuccess("Producto actualizado!")})).finally((function(){e.modalSetting.show=!1,e.setState({isLoading:!1,isShowModal:!1}),e.props.onLoading(!1)})).catch((function(t){var a;return e.props.onError(null!==(a=null===t||void 0===t?void 0:t.message)&&void 0!==a?a:"Request error")}))},e.addProduct=function(){ae.addProduct(e.state.data).then((function(){e.setState({isLoading:!1}),e.props.onSuccess("Producto agregado!")})).finally((function(){e.modalSetting.show=!1,e.setState({isLoading:!1,isShowModal:!1}),e.props.onLoading(!1)})).catch((function(t){var a;return e.props.onError(null!==(a=null===t||void 0===t?void 0:t.message)&&void 0!==a?a:"Request error")}))},e.doSubmit=function(){e.state.data.id?(e.modalSetting.title="Actualizar producto",e.modalSetting.msg="El producto ser\xe1 actualizado. \xbfesta seguro?"):(e.modalSetting.title="Add Product",e.modalSetting.msg="El producto ser\xe1 agregado. \xbfesta seguro?"),e.modalSetting.okFn=e.save,e.modalSetting.cancelFn=e.closeModal,e.modalSetting.show=!0,e.setState({isShowModal:!0})},e}return Object(s.a)(a,[{key:"componentDidUpdate",value:function(){(this.props.productSelected.id&&!this.state.data.id||!this.props.productSelected.id&&this.state.data.id||this.props.productSelected.id&&this.state.data.id&&this.props.productSelected.id!==this.state.data.id)&&this.setState({data:this.props.productSelected,errors:this.emptyErrors})}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(R,this.modalSetting),r.a.createElement("div",{className:"p-5 bg-gray-300"},r.a.createElement("form",{key:this.state.data.id?this.state.data.id:"productForm",onSubmit:this.handleSubmit,noValidate:!0},this.renderDropDown("brand","Marca",oe(this.props.brands,"name","name")),this.renderInput("description","Descripcion"),this.renderInput("price","Precio","number"),this.renderInput("amp","Amperaje"),this.renderDropDown("group","Grupo",(e=ce,Object.keys(e).map((function(t){return{value:t,text:e[t]}})))),r.a.createElement("div",{className:"flex items-center justify-between mt-8"},this.renderSubmit(this.state.data.id?"Acualizar producto":"Agregar producto")))));var e}}]),a}(J),ie=function(){var e={brand:"",description:"",group:"",amp:"",price:0},t=Object(n.useState)(e),a=Object(b.a)(t,2),l=a[0],c=a[1],o=Object(n.useState)(!1),s=Object(b.a)(o,2),i=s[0],u=s[1],m=Object(n.useState)("Casco"),d=Object(b.a)(m,2),h=d[0],f=d[1],E=Object(n.useState)([]),g=Object(b.a)(E,2),v=g[0],S=g[1],x=Object(n.useState)(!1),y=Object(b.a)(x,2),w=y[0],N=y[1],A=Object(n.useReducer)(te,{status:j,products:[]}),P=Object(b.a)(A,2),C=P[0].products,k=P[1];function R(t){u(!0),ae.getProducts("brand=".concat(t)).then((function(e){var t=e.data;t&&(t.data.sort(I).sort(F),k({products:Object(ee.a)(t.data),type:"PRODUCTS_LOADED"}))})).finally((function(){u(!1),c(e)})).catch((function(e){console.log("error: ",e),k({type:"GET_FAILURE",error:e})}))}Object(n.useEffect)((function(){ae.getBrands().then((function(e){var t=e.data;t&&S(t.data)})).catch((function(e){console.log("error: ",e),k({type:"GET_FAILURE",error:e})}))}),[v]),Object(n.useEffect)((function(){R(h)}),[]);function I(e,t){return e.description.localeCompare(t.description)}function F(e,t){return e.group.localeCompare(t.group)}return r.a.createElement(r.a.Fragment,null,r.a.createElement(U,null),i&&r.a.createElement(T,null),w&&r.a.createElement("p",{className:"mt-2 text-sm p-2 text-white bg-red-700"},"Ha ocurrido un error al agregar el producto. Por favor intentelo de nuevo."),r.a.createElement("main",{className:"max-w-screen-xl mx-auto p-4 min-h-screen"},r.a.createElement("div",{className:"flex items-center justify-between p-4"},r.a.createElement("h1",{className:"text-4xl"},"Administrador de productos")),r.a.createElement("section",{className:"flex"},r.a.createElement("div",{className:"md:w-4/6 "},r.a.createElement("div",{className:"w-1/3"},r.a.createElement(Y,{name:"brand",label:"Marca",value:h,options:oe(v,"name","name"),onChange:function(e){R(e.target.value),f(e.target.value)}})),C&&C.length?r.a.createElement("table",{className:"border-separate text-left border-flame-700"},r.a.createElement("thead",null,r.a.createElement("tr",{className:"text-center text-blue-900"},r.a.createElement("th",{className:"border-blue-900 font-light"},"Marca"),r.a.createElement("th",{className:"border-blue-900 font-light hidden md:table-cell"},"Descripcion"),r.a.createElement("th",{className:"border-blue-900 font-light hidden md:table-cell"},"Grupo"),r.a.createElement("th",{className:"border-blue-900 font-light hidden md:table-cell"},"Ampers"),r.a.createElement("th",{className:"border-blue-900 font-light"},"Precio"),r.a.createElement("th",{className:"border-blue-900 font-light"},"Accion"))),r.a.createElement("tbody",null,C.map((function(e){return r.a.createElement("tr",{className:"text-gray-800",key:e.id},r.a.createElement("td",{className:"border-t-2 border-yellow-600 font-light px-2"},e.brand),r.a.createElement("td",{className:"border-t-2 border-yellow-600 font-light px-2 hidden md:table-cell"},e.description),r.a.createElement("td",{className:"border-t-2 border-yellow-600 font-light px-2 hidden md:table-cell"},e.group),r.a.createElement("td",{className:"border-t-2 border-yellow-600 font-light px-2 hidden md:table-cell"},e.amp),r.a.createElement("td",{className:"border-t-2 border-yellow-600 font-light px-2"},"$ ",e.price),r.a.createElement("td",{className:"border-t-2 border-yellow-600 font-light px-2 flex"},r.a.createElement(O.b.Provider,{value:{className:"m-3 text-flame-700",size:"20px"}},r.a.createElement(_.a,{key:"edit_"+e.id,className:"cursor-pointer",onClick:function(){return function(e){c(e)}(e)},title:"Actualizar producto"}))))})))):r.a.createElement("div",{className:"text-2xl text-flame-700"},i?"Cargando...":"No hay productos para mostrar.")),r.a.createElement("div",{className:"w-full md:w-2/6"},r.a.createElement(se,{onSuccess:function(){R(h),c(Object(p.a)(Object(p.a)({},e),{},{id:"1"}))},onError:function(){N(!0)},onLoading:function(e){u(e),i&&N(!1)},productSelected:l,brands:v})))),r.a.createElement(M,null))},ue=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={data:{email:"",password:""},errors:{email:"",password:""},isLoading:!1,isShowModal:!1},e.formSchema={email:z.a.string().email({tlds:{allow:!1}}).message("Enter a valid e-mail"),password:z.a.string().pattern(new RegExp("^[a-zA-Z0-9]{5,30}$")).message("Password must be minimum 5 characters length and special characters are not allowed")},e.modalSetting=Object(p.a)({},F),e.resetPassword=function(t){f.auth().sendPasswordResetEmail(e.state.data.email).then((function(){e.modalSetting.show=!1,e.setState({isShowModal:!1})}))},e.closeModal=function(){e.modalSetting.show=!1,e.setState({isShowModal:!1})},e.openModal=function(){if(!Object(p.a)({},e.state.data).email){var t=Object(p.a)({},e.state.errors);return t.email="You must type your email for reset it.",void e.setState({errors:t})}e.modalSetting.cancelFn=e.closeModal,e.modalSetting.okFn=e.resetPassword,e.modalSetting.show=!0,e.setState({isShowModal:!0})},e.doSubmit=function(){e.setState({isLoading:!0}),e.props.onLoading(!0),h.a.auth().setPersistence(h.a.auth.Auth.Persistence.SESSION).then((function(){return f.auth().signInWithEmailAndPassword(e.state.data.email,e.state.data.password)})).finally((function(){e.setState({isLoading:!1}),e.props.onLoading(!1)})).then(e.props.onSuccess).catch(e.props.onError)},e}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(R,this.modalSetting),r.a.createElement("form",{onSubmit:this.handleSubmit,noValidate:!0},this.renderInput("email","E-mail","email"),this.renderInput("password","Password","password"),r.a.createElement("p",{className:"text-sm"},"Olvidaste la contrase\xf1a?"," ",r.a.createElement("button",{className:"cursor-pointer font-bold",type:"button",onClick:this.openModal},"Click aqui")," ","para recuperarla."),r.a.createElement("div",{className:"flex justify-between mt-8"},r.a.createElement(m.b,{to:"/signup",className:"btn btn-tertiary"},"Create account"),this.renderSubmit("Entrar"))))}}]),a}(J),me=[{path:"/",component:function(e){var t=Object(n.useState)(!1),a=Object(b.a)(t,2),l=a[0],c=a[1],o=Object(n.useState)(!1),s=Object(b.a)(o,2),i=s[0],u=s[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(U,null),r.a.createElement("main",null,r.a.createElement("div",{className:"w-full h-screen card card-white md:max-w-md md:rounded-sm md:mx-auto md:h-auto relative"},l&&r.a.createElement(T,null),r.a.createElement("div",{className:"p-10"},r.a.createElement("h1",{className:"text-center text-2xl font-emphasis"},"Credenciales"),i&&r.a.createElement("p",{className:"mt-2 text-sm p-2 text-white bg-red-700"},"E-mail o contrase\xf1a invalidos."),r.a.createElement(ue,{onSuccess:function(){e.history.push("/home")},onError:function(){u(!0)},onLoading:function(e){c(e),l&&u(!1)}})))),r.a.createElement(M,null))},exact:!0},{path:"/home",component:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(U,null),r.a.createElement("main",{className:"min-h-screen"},r.a.createElement("section",{className:"bg-blue-900 text-white md:h-64"},r.a.createElement("div",{className:"max-w-screen-xl mx-auto p-4"},r.a.createElement("h1",{className:"font-emphasis font-thin text-4xl md:text-5xl md:w-1/2"},"San Felipe Acumuladores")))),r.a.createElement(M,null))}},{path:"/brands",component:re},{path:"/locations",component:le},{path:"/products",component:ie},{path:"/signup",component:Q}];function de(e){return r.a.createElement(d.a,{path:e.path,render:function(t){return r.a.createElement(e.component,Object.assign({},t,{routes:e.routes}))}})}var pe=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement(m.a,null,r.a.createElement(A,null,r.a.createElement(d.c,null,me.map((function(e,t){return r.a.createElement(de,Object.assign({key:t},e))})))))}}]),a}(r.a.Component);a(110);c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(pe,null)),document.getElementById("root"))},59:function(e,t,a){e.exports=a(111)}},[[59,1,2]]]);
//# sourceMappingURL=main.7c44540d.chunk.js.map